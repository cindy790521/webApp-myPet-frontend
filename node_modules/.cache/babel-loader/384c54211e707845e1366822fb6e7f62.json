{"ast":null,"code":"var _jsxFileName = \"/Users/lintsaiju/Documents/5610/MERN Stack Application Project/frontend/src/components/DnDContainer.js\",\n    _s = $RefreshSig$();\n\nimport update from 'immutability-helper';\nimport { useCallback, useState, useEffect } from 'react';\nimport { DnDCard } from './DnDCard.js';\nimport MovieDataService from \"../services/movies\";\nimport FavoriteDataService from \"../services/favorites\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst style = {\n  width: 600\n};\nexport const DnDContainer = _ref => {\n  _s();\n\n  let {\n    user,\n    favorites,\n    uploadFavorites,\n    retreiveFavorites\n  } = _ref;\n  const [cards, setCards] = useState([]); // const [favorites,setFavorites]=useState([]);\n\n  const getMovies = useCallback(ids => {\n    MovieDataService.getFavoritesMovies(ids.toString()).then(response => {\n      console.log(\"gg\", favorites);\n      setCards(response.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  }, []); // const retreiveFavorites=useCallback((user)=>{\n  //   var data={\n  //     user_id:user.googleId\n  //   }\n  //   FavoriteDataService.getFavorites(data.user_id)\n  //   .then(response=>{\n  //     setFavorites(response.data.favorites);\n  //   })\n  //   .catch(e=>{\n  //       console.log(e);\n  //   });\n  // },[]);\n\n  useEffect(() => {\n    if (user) {\n      console.log(\"re\");\n      retreiveFavorites(user);\n    }\n\n    getMovies(favorites);\n  }, []);\n  useEffect(() => {\n    console.log(\"@@\", favorites);\n    getMovies(favorites);\n  }, [favorites]);\n  useEffect(() => {\n    if (user) {\n      let i;\n      let newFavIds = [];\n\n      for (i = 0; i < cards.length; i++) {\n        newFavIds.push(cards[i]._id);\n      }\n\n      console.log(\"new\", newFavIds);\n      let data = {\n        _id: user.googleId,\n        favorites: newFavIds\n      };\n      uploadFavorites(data);\n    }\n\n    console.log(\"fav\", favorites);\n    console.log(\"cards\", cards);\n  }, [cards]);\n  const moveCard = useCallback((dragIndex, hoverIndex) => {\n    setCards(prevCards => update(prevCards, {\n      $splice: [[dragIndex, 1], [hoverIndex, 0, prevCards[dragIndex]]]\n    }));\n  }, []);\n  const renderCard = useCallback((card, index) => {\n    return /*#__PURE__*/_jsxDEV(DnDCard, {\n      index: index,\n      id: card._id,\n      poster: card.poster,\n      text: card.title,\n      moveCard: moveCard\n    }, card._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: style,\n      children: cards.map((card, i) => renderCard(card, i))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), console.log(\"qq\", cards)]\n  }, void 0, true);\n};\n\n_s(DnDContainer, \"5pVfCdvZy29pGhk7d7LkVTF6ghk=\");\n\n_c = DnDContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"DnDContainer\");","map":{"version":3,"names":["update","useCallback","useState","useEffect","DnDCard","MovieDataService","FavoriteDataService","style","width","DnDContainer","user","favorites","uploadFavorites","retreiveFavorites","cards","setCards","getMovies","ids","getFavoritesMovies","toString","then","response","console","log","data","catch","e","i","newFavIds","length","push","_id","googleId","moveCard","dragIndex","hoverIndex","prevCards","$splice","renderCard","card","index","poster","title","map"],"sources":["/Users/lintsaiju/Documents/5610/MERN Stack Application Project/frontend/src/components/DnDContainer.js"],"sourcesContent":["import update from 'immutability-helper'\nimport { useCallback, useState, useEffect } from 'react'\nimport  {DnDCard}  from './DnDCard.js'\nimport MovieDataService from \"../services/movies\";\nimport FavoriteDataService from \"../services/favorites\";\n\nconst style = {\n  width: 600\n};\n\n  export const DnDContainer = ({user,favorites,uploadFavorites,retreiveFavorites}) => {\n    \n  const [cards, setCards] = useState([]);\n  // const [favorites,setFavorites]=useState([]);\n\n  \n\n\n  const getMovies=useCallback((ids)=>{\n    MovieDataService.getFavoritesMovies(ids.toString())\n    .then(response=>{\n      console.log(\"gg\",favorites)\n      setCards (response.data);}\n    )\n    .catch(e=>{\n        console.log(e);\n    })\n},[]);\n\n// const retreiveFavorites=useCallback((user)=>{\n//   var data={\n//     user_id:user.googleId\n//   }\n//   FavoriteDataService.getFavorites(data.user_id)\n//   .then(response=>{\n//     setFavorites(response.data.favorites);\n//   })\n//   .catch(e=>{\n//       console.log(e);\n//   });\n// },[]);\n\n\n\n  useEffect(() => {\n    if(user){\n      console.log(\"re\")\n        retreiveFavorites(user);\n      }\n    getMovies(favorites);\n  },[]);\n\n  useEffect(() => {\n    console.log(\"@@\",favorites)\n    getMovies(favorites);\n  },[favorites]);\n\n  \n  \n  useEffect(() => {\n    if(user){\n    let i;\n    let newFavIds=[];\n    for(i=0;i<cards.length;i++){\n      newFavIds.push(cards[i]._id);\n    }\n    console.log(\"new\",newFavIds);\n    let data={\n      _id:user.googleId,\n      favorites:newFavIds\n    };\n    uploadFavorites(data);\n  }\n  console.log(\"fav\",favorites)\n  console.log(\"cards\",cards)\n  },[cards]);\n\n    \n    const moveCard = useCallback((dragIndex, hoverIndex) => {\n      setCards((prevCards) =>\n        update(prevCards, {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, prevCards[dragIndex]],\n          ],\n        }),\n      )\n    }, [])\n    const renderCard = useCallback((card, index) => {\n      return (\n        <DnDCard\n          key={card._id}\n          index={index}\n          id={card._id}\n          poster={card.poster}\n          text={card.title}\n          moveCard={moveCard}\n        />\n      )\n    }, []);\n\n    return (\n      <>\n        <div style={style}>{cards.map((card, i) => renderCard(card, i))}</div>\n       {console.log(\"qq\",cards)}\n      </>\n    )\n    \n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}