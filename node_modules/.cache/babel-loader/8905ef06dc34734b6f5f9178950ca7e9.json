{"ast":null,"code":"var _jsxFileName = \"/Users/lintsaiju/Documents/5610/MERN Stack Application Project/frontend/src/components/Container.js\",\n    _s = $RefreshSig$();\n\nimport update from 'immutability-helper';\nimport { useCallback, useState, useEffect } from 'react';\nimport { DnDCard } from './DnDCard.js';\nimport MovieDataService from \"../services/movies\";\nimport FavoriteDataService from \"../services/favorites\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst style = {\n  width: 400\n}; // export const Container = ({user,uploadFavorites,favorites,retreiveFavorites}) => {\n\nexport const Container = _ref => {\n  _s();\n\n  let {\n    user,\n    uploadFavorites\n  } = _ref;\n  const [cards, setCards] = useState([]);\n  const [favorites, setFavorites] = useState([]);\n  const getMovies = useCallback(ids => {\n    //TODO\n    MovieDataService.getFavoritesMovies(ids.toString()).then(response => {\n      if (cards == []) {\n        setCards(response.data);\n      }\n\n      let i;\n\n      for (i = 0; i < cards.length; i++) {\n        if (cards[i]._id != response.data._id) {\n          setCards(response.data);\n        }\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  }, []);\n  const retreiveFavorites = useCallback(user => {\n    var data = {\n      user_id: user.googleId\n    };\n    FavoriteDataService.getFavorites(data.user_id).then(response => {\n      console.log(\"@@\");\n      setFavorites(response.data.favorites);\n    }).catch(e => {\n      console.log(e);\n    });\n  }, []);\n  useEffect(() => {\n    if (user) {\n      console.log(\"cont\");\n      retreiveFavorites(user);\n    }\n\n    console.log(\"1\", favorites);\n    getMovies(favorites);\n  }, []);\n  useEffect(() => {\n    console.log(\"++\", favorites);\n    getMovies(favorites);\n  }, [favorites]);\n  useEffect(() => {\n    let i;\n    let newFavIds = [];\n\n    for (i = 0; i < cards.length; i++) {\n      newFavIds.push(cards[i]._id);\n    }\n\n    console.log(\"new\", newFavIds);\n    let data = {\n      _id: user.googleId,\n      favorites: newFavIds\n    };\n    uploadFavorites(data);\n\n    if (favorites != newFavIds) {\n      setFavorites(newFavIds);\n    }\n  }, [cards]);\n  const moveCard = useCallback((dragIndex, hoverIndex) => {\n    setCards(prevCards => update(prevCards, {\n      $splice: [[dragIndex, 1], [hoverIndex, 0, prevCards[dragIndex]]]\n    }));\n  }, []);\n  const renderCard = useCallback((card, index) => {\n    return /*#__PURE__*/_jsxDEV(DnDCard, {\n      index: index,\n      id: card._id,\n      text: card.title,\n      moveCard: moveCard\n    }, card._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: style,\n      children: cards.map((card, i) => renderCard(card, i))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), console.log(\"cards\", cards)]\n  }, void 0, true);\n};\n\n_s(Container, \"2fd0wwa+5i/iBCzDxov0A2/MKY0=\");\n\n_c = Container;\n\nvar _c;\n\n$RefreshReg$(_c, \"Container\");","map":{"version":3,"names":["update","useCallback","useState","useEffect","DnDCard","MovieDataService","FavoriteDataService","style","width","Container","user","uploadFavorites","cards","setCards","favorites","setFavorites","getMovies","ids","getFavoritesMovies","toString","then","response","data","i","length","_id","catch","e","console","log","retreiveFavorites","user_id","googleId","getFavorites","newFavIds","push","moveCard","dragIndex","hoverIndex","prevCards","$splice","renderCard","card","index","title","map"],"sources":["/Users/lintsaiju/Documents/5610/MERN Stack Application Project/frontend/src/components/Container.js"],"sourcesContent":["import update from 'immutability-helper'\nimport { useCallback, useState, useEffect } from 'react'\nimport  {DnDCard}  from './DnDCard.js'\nimport MovieDataService from \"../services/movies\";\nimport FavoriteDataService from \"../services/favorites\";\n\nconst style = {\n  width: 400,\n};\n// export const Container = ({user,uploadFavorites,favorites,retreiveFavorites}) => {\n  export const Container = ({user,uploadFavorites}) => {\n    \n  const [cards, setCards] = useState([]);\n  const [favorites,setFavorites]=useState([]);\n\n  const getMovies=useCallback((ids)=>{\n    //TODO\n    \n    MovieDataService.getFavoritesMovies(ids.toString())\n    .then(response=>{\n      if(cards==[]){setCards (response.data);}\n      let i;\n      for (i=0;i<cards.length;i++){\n      if (cards[i]._id!=response.data._id){\n      setCards (response.data);}\n    }})\n    .catch(e=>{\n        console.log(e);\n    })\n},[]);\n\nconst retreiveFavorites=useCallback((user)=>{\n  var data={\n    user_id:user.googleId\n  }\n  \n  FavoriteDataService.getFavorites(data.user_id)\n  .then(response=>{\n    console.log(\"@@\");\n    setFavorites(response.data.favorites);\n  })\n  .catch(e=>{\n      console.log(e);\n  });\n},[]);\n\n\n\n  useEffect(() => {\n    if(user){\n      console.log(\"cont\")\n        retreiveFavorites(user);\n      }\n      \n    console.log(\"1\",favorites)\n    getMovies(favorites);\n  },[]);\n\n  useEffect(() => {\n    \n  console.log(\"++\",favorites) \n    getMovies(favorites);\n  },[favorites]);\n  \n  useEffect(() => {\n    let i;\n    let newFavIds=[];\n    \n    for(i=0;i<cards.length;i++){\n      newFavIds.push(cards[i]._id);\n    }\n    console.log(\"new\",newFavIds);\n    let data={\n      _id:user.googleId,\n      favorites:newFavIds\n    };\n    uploadFavorites(data);\n    if(favorites!=newFavIds){\n    setFavorites(newFavIds);}\n\n  },[cards]);\n\n    \n    const moveCard = useCallback((dragIndex, hoverIndex) => {\n      setCards((prevCards) =>\n        update(prevCards, {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, prevCards[dragIndex]],\n          ],\n        }),\n      )\n    }, [])\n    const renderCard = useCallback((card, index) => {\n      return (\n        <DnDCard\n          key={card._id}\n          index={index}\n          id={card._id}\n          text={card.title}\n          moveCard={moveCard}\n        />\n      )\n    }, []);\n\n    return (\n      <>\n        <div style={style}>{cards.map((card, i) => renderCard(card, i))}</div>\n         {console.log(\"cards\",cards)}\n      </>\n    )\n    \n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}